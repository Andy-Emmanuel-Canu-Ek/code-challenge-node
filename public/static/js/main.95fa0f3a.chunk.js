(this["webpackJsonpcode-challenge-react"]=this["webpackJsonpcode-challenge-react"]||[]).push([[0],{207:function(e,t,n){},208:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(10),c=n.n(a),s=n(21),o=n(51),i=n(7),u=n(6),l=n.n(u),d=n(12),j=n(16),b=n(15),m=n.n(b),f=n(25),p=n.n(f),h=(n(93),function(e){m.a.fire("Exito",e.msg,"success")}),O=function(e){var t;console.log("errrr",e.errors),!e.msg&&e.errors&&(t=(t=Object.keys(e.errors).map((function(t){return e.errors[t].msg}))).reduce((function(e,t){return e+t}),"")),m.a.fire("Ocurrio un error",e.msg||t||"Ha ocurrido un error al tratar de realizar la peticion. Por favor contactese con el administrador","error")},x=n(28),v=n(11),g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(r.useState)(e),n=Object(j.a)(t,2),a=n[0],c=n[1],s=function(){c(e)},o=function(e){var t=e.target;c(Object(v.a)(Object(v.a)({},a),{},Object(x.a)({},t.name,t.value)))};return[a,o,s]},w="[auth login]",N="[auth logut]",y="https://node-code-challenge.herokuapp.com/api",k=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",r="".concat(y,"/").concat(e);return console.log("fetch to",r,"with data ",t),console.log("Method",n),"GET"===n?fetch(r):fetch(r,{method:n,headers:{"Content-type":"application/json"},body:JSON.stringify(t)})},E=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",r="".concat(y,"/").concat(e),a=localStorage.getItem("token")||"";return"GET"===n?fetch(r,{method:n,headers:{"x-token":a}}):fetch(r,{method:n,headers:{"Content-type":"application/json","x-token":a},body:JSON.stringify(t)})},C=function(){var e=Object(d.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k("auth",t,"POST");case 2:return n=e.sent,e.next=5,n.json();case 5:return(r=e.sent).ok&&(localStorage.setItem("token",r.token),localStorage.setItem("user_id",r.user_id)),e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(d.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k("auth/new",t,"POST");case 2:return n=e.sent,e.next=5,n.json();case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(d.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E("auth/user_list",{},"GET");case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_=function(){var e=Object(d.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E("auth/"+t,{},"DELETE");case 2:return n=e.sent,e.next=5,n.json();case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(){return function(e){localStorage.clear(),e({type:N})}},A=n(2),P=function(){var e=Object(i.g)(),t=Object(s.b)(),n=g({lEmail:"",lPassword:""}),r=Object(j.a)(n,2),a=r[0],c=r[1],o=a.lEmail,u=a.lPassword,b=function(){var n=Object(d.a)(l.a.mark((function n(r){var a,c,s,o;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r.preventDefault(),a=f(),c=a.isValid,s=a.formData,c){n.next=4;break}return n.abrupt("return");case 4:return n.next=6,C(s);case 6:(o=n.sent).ok?(h(o),t((i={user_id:o.user_id},{type:w,payload:i})),e.replace("/")):O(o);case 8:case"end":return n.stop()}var i}),n)})));return function(e){return n.apply(this,arguments)}}(),f=function(){var e=!0,t=a.lEmail,n=a.lPassword;return p.a.isEmail(t)||(m.a.fire("Advertencia","El email no es v\xe1lido","warning"),e=!1),{isValid:e,formData:{email:t,password:n}}};return Object(A.jsxs)("div",{className:"col-md-5 login-form-1",children:[Object(A.jsx)("h3",{children:"Ingreso"}),Object(A.jsxs)("form",{onSubmit:b,children:[Object(A.jsx)("div",{className:"form-group",children:Object(A.jsx)("input",{type:"text",className:"form-control",placeholder:"Correo",name:"lEmail",value:o,onChange:c})}),Object(A.jsx)("br",{}),Object(A.jsx)("div",{className:"form-group",children:Object(A.jsx)("input",{type:"password",className:"form-control",placeholder:"Contrase\xf1a",name:"lPassword",value:u,onChange:c})}),Object(A.jsx)("br",{}),Object(A.jsx)("div",{className:"form-group",children:Object(A.jsx)("input",{type:"submit",className:"btnSubmit",value:"Login"})})]})]})},I=function(){var e=g({rName:"",rEmail:"",rPassword:"",rPasswordConfirm:""}),t=Object(j.a)(e,2),n=t[0],r=t[1],a=n.rName,c=n.rEmail,s=n.rPassword,o=n.rPasswordConfirm,i=function(){var e=Object(d.a)(l.a.mark((function e(t){var n,r,a,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n=u(),r=n.isValid,a=n.formData,r){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,S(a);case 6:(c=e.sent).ok?h(c):O(c);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=!0,t=n.rName,r=n.rEmail,a=n.rPassword,c=n.rPasswordConfirm;return p.a.isEmpty(t.toString().trim())&&(m.a.fire("Advertencia","Es necesario agregar un nombre","warning"),e=!1),e&&!p.a.isEmail(r)&&(m.a.fire("Advertencia","El email no es v\xe1lido","warning"),e=!1),e&&!p.a.equals(a,c)&&(m.a.fire("Advertencia","Las contrase\xf1as no coinciden","warning"),e=!1),{isValid:e,formData:{name:t,email:r,password:a}}};return Object(A.jsxs)("div",{className:"col-md-5 login-form-2",children:[Object(A.jsx)("h3",{children:"Registro"}),Object(A.jsxs)("form",{onSubmit:i,children:[Object(A.jsx)("div",{className:"form-group",children:Object(A.jsx)("input",{type:"text",className:"form-control",placeholder:"Nombre",name:"rName",value:a,onChange:r})}),Object(A.jsx)("br",{}),Object(A.jsx)("div",{className:"form-group",children:Object(A.jsx)("input",{type:"email",className:"form-control",placeholder:"Correo",name:"rEmail",value:c,onChange:r})}),Object(A.jsx)("br",{}),Object(A.jsx)("div",{className:"form-group",children:Object(A.jsx)("input",{type:"password",className:"form-control",placeholder:"Contrase\xf1a",name:"rPassword",value:s,onChange:r})}),Object(A.jsx)("br",{}),Object(A.jsx)("div",{className:"form-group",children:Object(A.jsx)("input",{type:"password",className:"form-control",placeholder:"Repita la contrase\xf1a",name:"rPasswordConfirm",value:o,onChange:r})}),Object(A.jsx)("br",{}),Object(A.jsx)("div",{className:"form-group",children:Object(A.jsx)("input",{type:"submit",className:"btnSubmit",value:"Crear cuenta"})})]})]})},R=function(){return Object(A.jsx)("div",{className:"container login-container",children:Object(A.jsxs)("div",{className:"row",children:[Object(A.jsx)(P,{}),Object(A.jsx)("div",{className:"col-md-2"}),Object(A.jsx)(I,{})]})})},F=function(){var e=Object(s.b)(),t=Object(i.g)();return Object(A.jsxs)("div",{className:"navbar navbar-expand-lg navbar-dark bg-dark",children:[Object(A.jsx)("a",{className:"navbar-brand",href:"/",children:"Code challenge"}),Object(A.jsx)("div",{className:"collapse navbar-collapse",id:"navbarColor02",children:Object(A.jsxs)("ul",{className:"navbar-nav mr-auto",children:[Object(A.jsx)("li",{className:"nav-item",children:Object(A.jsx)("a",{className:"nav-link",onClick:function(){t.push("/usuario")},children:"Usuarios"})}),Object(A.jsx)("li",{className:"nav-item active",children:Object(A.jsx)("a",{className:"nav-link",onClick:function(){t.push("/agenda")},children:"Agenda"})})]})}),Object(A.jsx)("span",{className:"btn btn-outline-info",onClick:function(){e(T()),t.replace("/login")},children:Object(A.jsx)("span",{children:"Salir"})})]})},G=function(e){var t=e.item,n=e.handleDelete,r=Object(s.c)((function(e){return e.auth})).user_id,a=t._id,c=t.index,o=t.name,i=t.email;return Object(A.jsx)(A.Fragment,{children:Object(A.jsxs)("tr",{children:[Object(A.jsx)("th",{scope:"row",children:c}),Object(A.jsx)("td",{children:o}),Object(A.jsx)("td",{children:i}),Object(A.jsx)("td",{children:"**********"}),Object(A.jsx)("td",{children:r!==a.toString()&&Object(A.jsx)("button",{type:"button",className:"btn btn-outline-danger",onClick:function(){return n(t)},children:"Eliminar"})})]})})},L=function(){var e=Object(r.useState)([]),t=Object(j.a)(e,2),n=t[0],a=t[1];Object(r.useEffect)((function(){c()}),[]);var c=function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D();case 2:(t=e.sent).ok?a(t.user_list):O(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),s=function(e){m.a.fire({title:"Eliminar usuario",text:"\xbfSeguro que desea eliminar este usuario?",icon:"warning",showCancelButton:!0,confirmButtonText:"S\xed, eliminar!",cancelButtonText:"No"}).then((function(t){var n=e._id;t.isConfirmed&&(console.log(n),o(n))}))},o=function(){var e=Object(d.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_(t);case 2:(n=e.sent).ok?(h(n),c()):O(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(A.jsx)("div",{children:Object(A.jsxs)("table",{className:"table table-striped table-hover",children:[Object(A.jsx)("thead",{children:Object(A.jsxs)("tr",{children:[Object(A.jsx)("th",{scope:"col",children:"#"}),Object(A.jsx)("th",{scope:"col",children:"Nombre"}),Object(A.jsx)("th",{scope:"col",children:"Correo"}),Object(A.jsx)("th",{scope:"col",children:"Pass"}),Object(A.jsx)("th",{scope:"col",children:"Opciones"})]})}),Object(A.jsx)("tbody",{children:n.map((function(e,t){return Object(A.jsx)(G,{item:Object(v.a)({index:t+1},e),handleDelete:s},t)}))})]})})},q=function(){return Object(A.jsx)("div",{children:Object(A.jsx)("div",{className:"card",children:Object(A.jsx)("div",{className:"card-body",children:Object(A.jsx)(L,{})})})})},V=(n(176),n(14)),B=n.n(V),H=n(58),M=n(55),J=n.n(M),U=n(56),z=n.n(U),X=function(){var e=Object(d.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===t.id){e.next=6;break}return e.next=3,E("events/"+t.id,t,"PUT");case 3:n=e.sent,e.next=9;break;case 6:return e.next=8,E("events",t,"POST");case 8:n=e.sent;case 9:return e.next=11,n.json();case 11:return r=e.sent,e.abrupt("return",r);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K=function(){var e=Object(d.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E("events/"+t,{},"DELETE");case 2:return n=e.sent,e.next=5,n.json();case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q=function(){var e=Object(d.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E("events",{},"GET");case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),W=function(e){return e.map((function(e){return{id:e.id,title:e.title,desc:e.desc,start:B()(e.start_date).toDate(),end:B()(e.end_date).toDate(),bgcolor:"#fafafa"}}))},Y={content:{top:"auto",left:"auto",right:"auto",bottom:"auto",transformValues:"translate(-50%, -50%)"}};J.a.setAppElement("#root");var Z=B()().minutes(0).seconds(0).add(1,"hours"),$=Z.clone().add(1,"hours"),ee={id:0,title:"",desc:"",start:Z.toDate(),end:$.toDate()},te=function(e){var t=e.isOpen,n=e.setisOpen,a=e.evt,c=e.setEventList,s=Object(r.useState)(ee),o=Object(j.a)(s,2),i=o[0],u=o[1];Object(r.useEffect)((function(){u({id:a.id?a.id:0,title:a.title?a.title:"",desc:a.desc?a.desc:"",start:a.start?B()(a.start).toDate():Z.toDate(),end:a.end?B()(a.end).toDate():$.toDate()})}),[a]);var b=i.id,f=i.title,g=i.desc,w=i.start,N=i.end,y=function(){var e=Object(d.a)(l.a.mark((function e(t){var r,a,s,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),r=S(),a=r.isValid,s=r.formData,a){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,X(s);case 6:(o=e.sent).ok?(h(o),c(W(o.event_list)),n(!1)):O(o);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m.a.fire({title:"Eliminar evento",text:"\xbfSeguro que desea eliminar este evento?",icon:"warning",showCancelButton:!0,confirmButtonText:"S\xed, eliminar!",cancelButtonText:"No"}).then((function(e){e.isConfirmed&&E()}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=Object(d.a)(l.a.mark((function e(){var t,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.id,e.next=3,K(t);case 3:(r=e.sent).ok?(h(r),c(W(r.event_list)),n(!1)):O(r);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(e){var t=e.target;u(Object(v.a)(Object(v.a)({},i),{},Object(x.a)({},t.name,t.value)))},S=function(){var e=!0,t=i.id,n=i.title,r=i.desc,a=i.start,c=i.end;return B()(a).isSameOrAfter(B()(c))&&(console.log("object"),m.a.fire("Error","La fecha final debe ser mayor a la fecha inicial","warning"),e=!1),e&&p.a.isEmpty(n)&&(m.a.fire("Error","Debe agregar un titulo","warning"),e=!1),{isValid:e,formData:{id:t,title:n,desc:r,start_date:a,end_date:c}}};return Object(A.jsx)("div",{children:Object(A.jsxs)(J.a,{isOpen:t,onRequestClose:function(){n(!1)},style:Y,closeTimeoutMS:300,contentLabel:"Example Modal",className:"modal",overlayClassName:"modal-fondo",children:[Object(A.jsx)("h1",{children:" Guardar evento "}),Object(A.jsx)("hr",{}),Object(A.jsxs)("form",{className:"container",onSubmit:y,children:[Object(A.jsxs)("div",{className:"form-group",children:[Object(A.jsx)("label",{children:"Fecha y hora inicio"}),Object(A.jsx)(z.a,{className:"form-control",placeholder:"Fecha inicio",onChange:function(e){u(Object(v.a)(Object(v.a)({},i),{},{start:e}))},value:w})]}),Object(A.jsxs)("div",{className:"form-group",children:[Object(A.jsx)("label",{children:"Fecha y hora fin"}),Object(A.jsx)(z.a,{className:"form-control",placeholder:"Fecha fin",onChange:function(e){u(Object(v.a)(Object(v.a)({},i),{},{end:e}))},value:N,minDate:w})]}),Object(A.jsx)("hr",{}),Object(A.jsxs)("div",{className:"form-group",children:[Object(A.jsx)("label",{children:"Titulo"}),Object(A.jsx)("input",{type:"text",className:"form-control",placeholder:"T\xedtulo del evento",name:"title",autoComplete:"off",onChange:C,value:f}),Object(A.jsx)("small",{id:"emailHelp",className:"form-text text-muted",children:"Una descripci\xf3n corta"})]}),Object(A.jsxs)("div",{className:"form-group",children:[Object(A.jsx)("textarea",{onChange:C,className:"form-control",placeholder:"Descripci\xf3n",rows:5,value:g,name:"desc"}),Object(A.jsx)("small",{id:"emailHelp",className:"form-text text-muted",children:"Informaci\xf3n adicional"})]}),Object(A.jsxs)("button",{type:"submit",className:"btn btn-outline-primary btn-block",children:[Object(A.jsx)("i",{className:"far fa-save"}),Object(A.jsx)("span",{children:" Guardar"})]}),Object(A.jsx)("span",{children:" "}),0!==b&&Object(A.jsxs)("span",{onClick:k,className:"btn btn-outline-danger btn-block",children:[Object(A.jsx)("i",{className:"far fa-save"}),Object(A.jsx)("span",{children:" Eliminar"})]})]})]})})},ne=function(e){var t=e.event,n=t.start,r=t.end,a=t.desc;return Object(A.jsxs)("div",{children:[Object(A.jsx)("h6",{children:e.title}),Object(A.jsxs)("p",{children:["Descripci\xf3n: ",a]}),Object(A.jsxs)("label",{children:[" Inicia: ",B()(n).format("hh:mm A")," - Termina: ",B()(r).format("hh:mm A")]})]})},re={allDay:"Todo el d\xeda",previous:"<",next:">",today:"Hoy",month:"Mes",week:"Semana",day:"D\xeda",agenda:"Agenda",date:"Fecha",time:"Hora",event:"Evento",noEventsInRange:"No hay eventos en este rango"};n(206);B.a.locale("es");var ae=Object(H.b)(B.a),ce=function(){var e=Object(r.useState)(!1),t=Object(j.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)([]),s=Object(j.a)(c,2),o=s[0],i=s[1],u=Object(r.useState)({}),b=Object(j.a)(u,2),m=b[0],f=b[1];Object(r.useEffect)((function(){p()}),[]);var p=function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q();case 2:(t=e.sent).ok?i(W(t.event_list)):O(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)("div",{className:"card",children:Object(A.jsx)("div",{className:"card-body",children:Object(A.jsx)(H.a,{selectable:!0,localizer:ae,events:o,messages:re,eventPropGetter:function(e,t,n,r){return{style:{backgroundColor:"#367CF7",borderRadius:"0px",opacity:.8,display:"block",color:"white"}}},components:{event:ne},onSelectSlot:function(e){f(e),a(!0)},onDoubleClickEvent:function(e){f(e),a(!0)},startAccessor:"start",endAccessor:"end"})})}),Object(A.jsx)(te,{isOpen:n,setisOpen:a,evt:m,setEventList:i})]})},se=function(){return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(F,{}),Object(A.jsx)("div",{className:"card",children:Object(A.jsx)("div",{className:"card-body",children:Object(A.jsxs)(i.d,{children:[Object(A.jsx)(i.b,{exact:!0,path:"/usuario",component:q}),Object(A.jsx)(i.b,{exact:!0,path:"/agenda",component:ce}),Object(A.jsx)(i.b,{exact:!0,path:"/",component:q}),Object(A.jsx)(i.a,{to:"/"})]})})})]})},oe=n(39),ie=n(1),ue=n.n(ie),le=function(e){var t=e.isAuth,n=e.component,r=Object(oe.a)(e,["isAuth","component"]);return Object(A.jsx)(i.b,Object(v.a)(Object(v.a)({},r),{},{component:function(e){return t?Object(A.jsx)(i.a,{to:"/"}):Object(A.jsx)(n,Object(v.a)({},e))}}))};le.protoTypes={isAuth:ue.a.bool.isRequired,component:ue.a.func.isRequired};var de=function(e){var t=e.isAuth,n=e.component,r=Object(oe.a)(e,["isAuth","component"]);return Object(A.jsx)(i.b,Object(v.a)(Object(v.a)({},r),{},{component:function(e){return t?Object(A.jsx)(n,Object(v.a)({},e)):Object(A.jsx)(i.a,{to:"/login"})}}))};de.protoTypes={isAuth:ue.a.bool.isRequired,component:ue.a.func.isRequired};var je=function(){var e=Object(s.c)((function(e){return e.auth})).user_id;return Object(A.jsx)(o.a,{children:Object(A.jsx)("div",{children:Object(A.jsxs)(i.d,{children:[Object(A.jsx)(le,{isAuth:!!e,path:"/login",component:R}),Object(A.jsx)(de,{isAuth:!!e,path:"/",component:se})]})})})},be=n(24),me=n(82),fe={logged:!0,user_id:localStorage.getItem("user_id")},pe=Object(be.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w:return Object(v.a)(Object(v.a)(Object(v.a)({},e),t.payload),{},{logged:!0});case N:return{logged:!1};default:return e}}}),he="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||be.d,Oe=Object(be.e)(pe,he(Object(be.a)(me.a))),xe=(n(207),function(){return Object(A.jsx)("div",{children:Object(A.jsx)(s.a,{store:Oe,children:Object(A.jsx)(je,{})})})});c.a.render(Object(A.jsx)(xe,{}),document.getElementById("root"))},93:function(e,t,n){}},[[208,1,2]]]);
//# sourceMappingURL=main.95fa0f3a.chunk.js.map